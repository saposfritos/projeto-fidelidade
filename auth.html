<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Programa de Fidelidade ENIAC - Login</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: #f5f7fa;
margin: 0;
padding: 0;
}
.logo-text {
font-weight: 900;
font-size: 1.25rem;
letter-spacing: -0.05em;
color: #0b1e7e;
}
.logo-subtext {
font-size: 0.75rem;
color: #0b1e7e99;
font-weight: 600;
margin-top: -0.2rem;
}
/* Icons for inputs */
.icon-input svg {
width: 1rem;
height: 1rem;
stroke-width: 1.5;
stroke: #64748b;
}
.icon-input input {
padding-left: 2.5rem;
}
/* Eye button for toggle password */
.pass-toggle-btn {
cursor: pointer;
color: #64748b;
transition: color 0.2s ease-in-out;
}
.pass-toggle-btn:hover {
color: #0b1e7e;
}
/* Active nav button */
.nav-btn.active {
background-color: #2563eb;
box-shadow: 0 5px 15px -5px #3b82f6aa;
font-weight: 600;
color: white;
}
</style>
</head>
<body>
<header class="bg-gradient-to-r from-blue-700 to-blue-500 shadow-md">
<div class="max-w-7xl mx-auto flex items-center justify-between px-6 py-3">
<div class="flex flex-col">
<div class="logo-text">ENIAC <span style="color:#000">▮▮▮</span></div>
<div class="logo-subtext">Centro Universitário de Excelência</div>
</div>
<nav class="flex gap-4">
<button class="nav-btn px-5 py-2 rounded-full text-white hover:bg-blue-600"
data-target="home" onclick="window.location.href='index.html'">Home</button>
<button class="nav-btn px-5 py-2 rounded-full text-white active"
data-target="login">Login</button>
<button class="nav-btn px-5 py-2 rounded-full text-white hover:bg-blue-600"
data-target="register" onclick="window.location.href='cadastro.html'">Cadastro</button>
<button class="nav-btn px-5 py-2 rounded-full text-white hover:bg-blue-600"
data-target="reset" onclick="window.location.href='redefinir_senha.html'">Redefinir Senha</button>
</nav>
</div>
</header>
<main class="flex justify-center items-center min-h-[calc(100vh-64px)] bg-gradient-to-r
from-blue-600 to-blue-400 px-4">
<section class="bg-white rounded-lg shadow-lg max-w-5xl w-full flex overflow-hidden">
<!-- Left side form container -->
<div id="form-area" class="w-1/2 p-8 sm:w-full sm:max-w-md mx-auto">
<!-- LOGIN FORM -->
<form id="login-form" class="space-y-6" novalidate>
<h2 class="text-2xl font-bold text-gray-900 mb-2">Bem-vindo de volta!</h2>
<p class="text-gray-600 mb-6">Faça login para acessar sua conta do programa de
fidelidade</p>
<div>
<label for="login-email" class="block mb-1 font-semibold
text-gray-700">E-mail</label>
<div class="relative icon-input">
<svg class="absolute top-1/2 left-3 -translate-y-1/2 text-gray-400
pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"
aria-hidden="true">
<path stroke-linecap="round" stroke-linejoin="round" d="M16 12H8m8-4H8m8
8H8m2-6h4m1 0h.01"/>
</svg>
<input type="email" id="login-email" name="login-email"
placeholder="seu@email.com" required class="border border-gray-300 rounded-md w-full
py-2 pr-3 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent" />
</div>
<p class="mt-1 text-sm text-red-500 hidden" id="login-email-error">E-mail é
obrigatório</p>
</div>
<div>
<label for="login-password" class="block mb-1 font-semibold
text-gray-700">Senha</label>
<div class="relative icon-input">
<svg class="absolute top-1/2 left-3 -translate-y-1/2 text-gray-400
pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"
aria-hidden="true">
<path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m0-8a4 4 0 100
8 4 4 0 000-8z"/>
</svg>
<input type="password" id="login-password" name="login-password"
placeholder="********" required class="border border-gray-300 rounded-md w-full py-2 pr-10
focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent" />
<button type="button" tabindex="-1" class="pass-toggle-btn absolute top-1/2 right-3
-translate-y-1/2" aria-label="Mostrar senha">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
viewBox="0 0 24 24" >
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15
12a3 3 0 11-6 0 3 3 0 016 0z"/>
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458
12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542
7-4.477 0-8.268-2.943-9.542-7z"/>
</svg>
</button>
</div>
<p class="mt-1 text-sm text-red-500 hidden" id="login-password-error">Senha é
obrigatória</p>
</div>
<div class="flex items-center justify-between text-sm text-gray-700">
<label class="flex items-center gap-2 cursor-pointer select-none">
<input type="checkbox" id="remember-me" name="remember-me"
class="accent-blue-600" />
Lembrar de mim
</label>
<a href="redefinir_senha.html" class="text-blue-700 hover:underline
focus:outline-none">Esqueceu a senha?</a>
</div>
<button type="submit" class="w-full mt-4 bg-blue-700 hover:bg-blue-800 text-white
font-semibold rounded-full py-3 transition-shadow shadow-md hover:shadow-lg
focus:outline-none focus:ring-2 focus:ring-blue-600">Entrar</button>
<p class="mt-4 text-sm text-center text-gray-600">Não tem conta? <a
href="cadastro.html" class="text-blue-700 font-semibold hover:underline
focus:outline-none">Cadastre-se</a></p>
</form>
</div>
<!-- Right side info container -->
<div class="hidden md:block w-1/2 bg-gradient-to-b from-blue-900 to-blue-700 text-white
p-10">
<h2 class="text-2xl font-bold mb-4">Programa de Fidelidade ENIAC</h2>
<p class="mb-6 text-lg leading-relaxed">Acesse sua conta e continue acumulando
pontos através das suas atividades escolares.</p>
<ul class="space-y-4">
<li class="flex items-center gap-3 bg-blue-800 bg-opacity-40 rounded-md p-4">
<div class="bg-white bg-opacity-20 rounded-full p-2">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24
24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17a4
4 0 100-8 4 4 0 000 8z" />
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21
21l-6-6" />
</svg>
</div>
<span>Acumule pontos automaticamente</span>
</li>
<li class="flex items-center gap-3 bg-blue-800 bg-opacity-40 rounded-md p-4">
<div class="bg-white bg-opacity-20 rounded-md p-2">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24
24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4
4v16h16" />
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14
4v16m7-7H7" />
</svg>
</div>
<span>Troque por prêmios exclusivos</span>
</li>
<li class="flex items-center gap-3 bg-blue-800 bg-opacity-40 rounded-md p-4">
<div class="bg-white bg-opacity-20 rounded-md p-2">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24
24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9
17v-6a2 2 0 114 0v6a2 2 0 11-4 0z" />
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 7v-2"
/>
</svg>
</div>
<span>Acompanhe seu progresso</span>
</li>
</ul>
</div>
</section>
</main>
<script>
(() => {
const API_BASE = 'http://localhost:5001/api';

// Validation helper
function showError(inputId, messageId, show) {
const errorEl = document.getElementById(messageId);
if (!errorEl) return;
errorEl.classList.toggle("hidden", !show);
const input = document.getElementById(inputId);
if (input) {
if(show){
input.classList.add("border-red-500");
input.classList.remove("focus:ring-blue-600");
input.classList.remove("focus:border-transparent");
} else {
input.classList.remove("border-red-500");
input.classList.add("focus:ring-blue-600");
input.classList.add("focus:border-transparent");
}
}
}

// Clear all errors
function clearAllErrors() {
const errorMessages = document.querySelectorAll("p.text-red-500");
errorMessages.forEach(el => el.classList.add("hidden"));
const inputs = document.querySelectorAll("input");
inputs.forEach(i => {
i.classList.remove("border-red-500");
i.classList.add("focus:ring-blue-600");
i.classList.add("focus:border-transparent");
});
}

// Simple email regex
const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

// API call helper
async function apiCall(endpoint, method = 'GET', data = null) {
const options = {
method,
headers: {
'Content-Type': 'application/json',
},
credentials: 'include', // Include cookies for session
};

if (data) {
options.body = JSON.stringify(data);
}

try {
const response = await fetch(`${API_BASE}${endpoint}`, options);
const result = await response.json();
return { success: response.ok, data: result, status: response.status };
} catch (error) {
return { success: false, error: error.message };
}
}

// Toggle password visibility for login password field
document.querySelector("#login-form .pass-toggle-btn").addEventListener("click", e => {
const input = document.getElementById("login-password");
const btn = e.currentTarget;
if (input.type === "password") {
input.type = "text";
btn.setAttribute("aria-label", "Ocultar senha");
} else {
input.type = "password";
btn.setAttribute("aria-label", "Mostrar senha");
}
});

// LOGIN FORM SUBMIT
const loginForm = document.getElementById("login-form");
loginForm.addEventListener("submit", async e => {
e.preventDefault();
clearAllErrors();
let hasError = false;

const email = loginForm["login-email"].value.trim();
const password = loginForm["login-password"].value;

if (!email) {
showError("login-email", "login-email-error", true);
hasError = true;
} else if (!emailRegex.test(email)){
showError("login-email", "login-email-error", true);
document.getElementById("login-email-error").textContent = "E-mail inválido";
hasError = true;
}

if (!password) {
showError("login-password", "login-password-error", true);
hasError = true;
}

if (!hasError) {
const result = await apiCall('/auth/login', 'POST', { email, password });
if (result.success) {
alert("Login efetuado com sucesso!");
loginForm.reset();
// Redirect to main page
window.location.href = 'index.html';
} else {
alert(result.data.error || 'Erro no login');
}
}
});
})();
</script>
</body>
</html>

